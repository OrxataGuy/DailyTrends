@extends('layouts.main')
@section('content')
<header>
    <nav class="mega-menu">
        <!-- Brand and toggle get grouped for better mobile display -->
          <ul class="nav navbar-nav" id="navbar">
            <li class="level1 active hover-menu"><a class="active" href="#" title="Home">Home</a>
                <ul class="menu-level-1 list-menu">
                   <li class="level2"><a class="active" href="home_v1.html" title="Home 1">Home 1</a></li>
                    <li class="level2"><a href="home_v2.html" title="Home 2">Home 2</a></li>
                    <li class="level2"><a href="home_v3.html" title="Home 3">Home 3</a></li>
                    <li class="level2"><a href="home_v4.html" title="Home 4">Home 4</a></li>
                </ul>
            </li>
            <li class="level1 hover-menu">
                <a href="#" title="Social">Social</a>
            </li>
            <li class="level1 hover-menu">
                <a href="#" title="BUSINESS">BUSINESS</a>
            </li>
            <li class="level1 hover-menu">
                <a href="#" title="GAMING">GAMING</a>
            </li>
            <li class="level1 hover-menu">
                <a href="#" title="TRAVEL">TRAVEL</a>
            </li>
            <li class="level1 hover-menu">
                <a href="#" title="TECHNOLOGY">TECHNOLOGY</a>
            </li>
            <li class="level1 hover-menu">
                <a href="#" title="SPORTS">SPORTS</a>
            </li>
            <li class="level1 hover-menu">
                <a href="#" title="Page">Page</a>
                <div class="sub-menu list-menu">
                  <div class="main-sub-menu">
                    <div class="col-md-3 col-sm-6">
                        <div class="post-item ver3 overlay">
                            <div class="wrap-images">
                                <a class="images" href="#" title="images"><img class="img-responsive" src="assets/images/blog/9.jpg" alt="images"></a>
                                <div class="tag">
                                    <p class="date"><i class="fa fa-clock-o"></i>May 06,2014</p>
                                    <a class="comments" href="#" title="comments"><i class="fa fa-comments"></i>10</a>
                                </div>
                            </div>
                            <div class="text">
                                <h2><a href="" title="title">The Perfect theme for Games</a></h2>
                                <p>Praesent posuere libero eu justo tristique, vitae ultricies justo volutpatInte. Ut luctus justo elit, sit amet..</p>
                                <a class="read-more" href="#" title="read more">read more</a>
                            </div>
                        </div>
                    </div>
                    <!-- End col-md-3 -->
                    <div class="col-md-3 col-sm-6">
                        <div class="post-item ver3 overlay">
                            <div class="wrap-images">
                                <a class="images" href="#" title="images"><img class="img-responsive" src="assets/images/blog/9.jpg" alt="images"></a>
                                <div class="tag">
                                    <p class="date"><i class="fa fa-clock-o"></i>May 06,2014</p>
                                    <a class="comments" href="#" title="comments"><i class="fa fa-comments"></i>10</a>
                                </div>
                            </div>
                            <div class="text">
                                <h2><a href="" title="title">The Perfect theme for Games</a></h2>
                                <p>Praesent posuere libero eu justo tristique, vitae ultricies justo volutpatInte. Ut luctus justo elit, sit amet..</p>
                                <a class="read-more" href="#" title="read more">read more</a>
                            </div>
                        </div>
                    </div>
                    <!-- End col-md-3 -->
                    <div class="col-md-3 col-sm-6">
                        <div class="post-item ver3 overlay">
                            <div class="wrap-images">
                                <a class="images" href="#" title="images"><img class="img-responsive" src="assets/images/blog/9.jpg" alt="images"></a>
                                <div class="tag">
                                    <p class="date"><i class="fa fa-clock-o"></i>May 06,2014</p>
                                    <a class="comments" href="#" title="comments"><i class="fa fa-comments"></i>10</a>
                                </div>
                            </div>
                            <div class="text">
                                <h2><a href="" title="title">The Perfect theme for Games</a></h2>
                                <p>Praesent posuere libero eu justo tristique, vitae ultricies justo volutpatInte. Ut luctus justo elit, sit amet..</p>
                                <a class="read-more" href="#" title="read more">read more</a>
                            </div>
                        </div>
                    </div>
                    <!-- End col-md-3 -->
                    <div class="col-md-3 col-sm-6">
                        <div class="post-item ver3 overlay">
                            <div class="wrap-images">
                                <a class="images" href="#" title="images"><img class="img-responsive" src="assets/images/blog/9.jpg" alt="images"></a>
                                <div class="tag">
                                    <p class="date"><i class="fa fa-clock-o"></i>May 06,2014</p>
                                    <a class="comments" href="#" title="comments"><i class="fa fa-comments"></i>10</a>
                                </div>
                            </div>
                            <div class="text">
                                <h2><a href="" title="title">The Perfect theme for Games</a></h2>
                                <p>Praesent posuere libero eu justo tristique, vitae ultricies justo volutpatInte. Ut luctus justo elit, sit amet..</p>
                                <a class="read-more" href="#" title="read more">read more</a>
                            </div>
                        </div>
                    </div>
                    <!-- End col-md-3 -->
                  </div>
                  <!-- End main-submenu -->
                  <div class="bottom-submenu">
                        <a href="#" title="All Business">All Business</a>
                        <a href="#" title="Finance">Finance</a>
                        <a href="#" title="Markets">Markets</a>
                        <a href="#" title="Cars">Cars</a>
                        <a href="#" title="Columnist">Columnist</a>
                        <a href="#" title="Money">Money</a>
                  </div>
                  <!-- End bottom-sub -->
              </div>
              <!-- End Sub Menu -->
            </li>
            <li class="level1 hover-menu"><a href="#" title="Post style">Post style</a>
                <ul class="menu-level-1 list-menu">
                    <li class="level2"><a href="lookbook_v2.html" title="Lookbook Style 1" target="_blank">Contact us</a>
                        <ul class="menu-level-2">
                            <li class="level3"><a href="lookbook_v2.html" title="Sub Menu #01" target="_blank">Sub Menu #01</a></li>
                            <li class="level3"><a href="lookbook_v3.html" title="Sub Menu #02" target="_blank">Sub Menu #02</a></li>
                            <li class="level3"><a href="lookbook_v4.html" title="Sub Menu #03" target="_blank">Sub Menu #03</a></li>
                            <li class="level3"><a href="lookbook_v5.html" title="Sub Menu #04" target="_blank">Sub Menu #04</a></li>
                        </ul>
                    </li>
                    <li class="level2"><a href="lookbook_v3.html" title="Author page" target="_blank">Author page</a>
                        <ul class="menu-level-2">
                            <li class="level3"><a href="lookbook_v2.html" title="Sub Menu #01" target="_blank">Sub Menu #01</a></li>
                            <li class="level3"><a href="lookbook_v3.html" title="Sub Menu #02" target="_blank">Sub Menu #02</a></li>
                            <li class="level3"><a href="lookbook_v4.html" title="Sub Menu #03" target="_blank">Sub Menu #03</a></li>
                            <li class="level3"><a href="lookbook_v5.html" title="Sub Menu #04" target="_blank">Sub Menu #04</a></li>
                        </ul>
                    </li>
                    <li class="level2"><a href="lookbook_v4.html" title="Tags Page" target="_blank">Tags Page</a></li>
                    <li class="level2"><a href="lookbook_v5.html" title="404 erro" target="_blank">404 error</a></li>
                    <li class="level2"><a href="lookbook_v5.html" title="Search Page" target="_blank">Search Page</a></li>
                </ul>
            </li>
          </ul>
        </nav>
        <!-- End megamenu -->
</header>
<div class="home3-banner box space-30">
    <div class="container">
        <div class="row hidden-desktop">
            <div class="col-md-8">
                <div class="post-item ver1 overlay main-new-first"></div>
                <!-- End item -->
            </div>
            <!-- End col-md-8 -->
            <div class="col-md-4">
                <div class="post-item ver1 overlay main-new-second"></div>
                <!-- End item -->
                <div class="post-item ver1 overlay main-new-third"></div>
                <!-- End item -->
            </div>
            <!-- End col-md-4 -->
        </div>
        <div class="slide-owl-mobile home3-slide-owl nav-ver5">
            <div class="item">
                <div class="post-item ver1 overlay main-new-first"></div>
            </div>
            <!-- End item -->
            <div class="item">
                <div class="post-item ver1 overlay main-new-second"></div>
            </div>
            <!-- End item -->
            <div class="item">
                <div class="post-item ver1 overlay main-new-third"></div>
            </div>
            <!-- End item -->
        </div>
        <!-- End Slide home3 -->
    </div>
</div>
<!-- End banner-home -->

<div class="container">
    <div class="row">
        <div class="col-md-2">
            <aside class="widget size-16 post-col box aside-left-news"></aside>
        </div>
        <!-- End col-md-2 -->
        <div class="col-md-6">
            <div class="slider-one-item box space-30 main-news"></div>
        </div>
        @include('template.maylike')
    </div>
</div>
<!-- End container -->
<div id="back-to-top">
    <i class="fa fa-long-arrow-up"></i>
</div>
@endsection

@section('styles')
<style>
    img.img-middle {
        width: 36em;
        max-height: 20em;

    }
    img.main-primary {
        height: 33em;
    }

    img.main-secondary {
        height: 15.4em;
    }

@media (max-width : 320px) {
    img.main-primary {
        height: 33em;
    }

    img.main-secondary {
        height: 33em;
    }
}
</style>
@endsection
@section('scripts')
<script>
    initialize()
    var feeds;
    function loadFeed() {
        return $.ajax({
            method: 'GET',
            url: "{{ route('feed') }}"
        });
    }

    function initialize() {
        loadFeed().then(res => {
            feeds = res.value;
            mountMainFeeds()
            mountLeftFeeds()
            mountMiddleFeeds()
            mountMayLikeFeeds()
        })

    }
    function mountMainFeeds() {
        const first = $(".main-new-first"),
            second = $(".main-new-second"),
            third = $(".main-new-third"),
            templateP = feed => {
                return  `<span class="lable">${feed.publisher}</span>
                    <a class="images" href="{{ env('app_url') }}/post/${feed.id}" title="images"><img class='img-responsive main-primary' src="${feed.image}" alt="images"></a>
                    <div class="text">
                        <h2><a href="{{ env('app_url') }}/post/${feed.id}" title="${feed.title}">${feed.title}</a></h2>
                        <div class="tag">
                            <p class="date"><i class="fa fa-clock-o"></i>May 06,2014</p>
                        </div>
                    </div>`;
            },
            template = feed => {
                return  `<span class="lable">${feed.publisher}</span>
                    <a class="images" href="{{ env('app_url') }}/post/${feed.id}" title="images"><img class='img-responsive main-secondary' src="${feed.image}" alt="images"></a>
                    <div class="text">
                        <h2><a href="{{ env('app_url') }}/post/${feed.id}" title="${feed.title}">${feed.title}</a></h2>
                        <div class="tag">
                            <p class="date"><i class="fa fa-clock-o"></i>May 06,2014</p>
                        </div>
                    </div>`;
            };


        first.toArray().forEach(e => {
            $(e).html(templateP(feeds[0]))
            $(e).addClass('cat-'+feeds[0].publisher_id)
        });
        second.toArray().forEach(e => {
            $(e).html(template(feeds[1]))
            $(e).addClass('cat-'+feeds[1].publisher_id)
        });
        third.toArray().forEach(e => {
            $(e).html(template(feeds[2]))
            $(e).addClass('cat-'+feeds[2].publisher_id)
        });
    }

    function mountLeftFeeds() {
        const container = $(".aside-left-news")[0],
            min=3,
            count = 6,
            template = feed => {
                return `<div class="post-item ver3 overlay">
                    <div class="wrap-images">
                        <a class="images" href="{{ env('app_url') }}/post/${feed.id}" title="images"><img class='img-responsive' src="${feed.image}" alt="images"></a>
                    </div>
                    <div class="text">
                        <h2><a href="{{ env('app_url') }}/post/${feed.id}" title="${feed.title}">${feed.title}</a></h2>
                        <div class="tag">
                            <p class="date"><i class="fa fa-clock-o"></i>May 06,2014</p>
                        </div>
                    </div>
                </div>`;
            };

        for(let i=0; i<count; i++)
            $(container).append(template(feeds[min+i]))
    }

    function mountMiddleFeeds() {
        const container = $(".main-news")[0],
            min=10,
            count = 4,
            template = feed => {
                return `<div class="post-item cat-${feed.publisher_id} ver1 overlay">
                    <span class="lable">${feed.publisher}</span>
                    <a class="images" href="{{ env('app_url') }}/post/${feed.id}" title="images"><img class='img-responsive img-middle' src="${feed.image}" alt="images"></a>
                    <div class="text">
                        <h2><a href="{{ env('app_url') }}/post/${feed.id}" title="${feed.title}">${feed.title}</a></h2>
                        <div class="tag">
                            <p class="date"><i class="fa fa-clock-o"></i>May 06,2014</p>
                        </div>
                    </div>
                </div>`;
            };
            for(let i=0; i<count; i++)
                $(container).append(template(feeds[min+i]))
    }

    function mountMayLikeFeeds() {
        const container = $('.aside-right-news')[0],
            templateFirst = feed => {
                return `<div class="post-item ver1 overlay">
                <a class="images" href="{{ env('app_url') }}/post/${feed.id}" title="images"><img class='img-responsive' src="${feed.image}" alt="images"></a>
                    <div class="text">
                        <h2><a href="{{ env('app_url') }}/post/${feed.id}" title="${feed.title}">${feed.title}</a></h2>
                        <div class="tag">
                            <p class="date"><i class="fa fa-clock-o"></i>May 06,2014</p>
                        </div>
                    </div>
                </div>`
            },
            min = 15,
            count = 10,
            template = feed => {
                return `<div class="post-item ver2 overlay">
                <a class="images" href="{{ env('app_url') }}/post/${feed.id}" title="images"><img class='img-responsive' src="${feed.image}" alt="images"></a>
                    <div class="text">
                        <h2><a href="{{ env('app_url') }}/post/${feed.id}" title="${feed.title}">${feed.title}</a></h2>
                        <div class="tag">
                            <p class="date"><i class="fa fa-clock-o"></i>May 06,2014</p>
                        </div>
                    </div>
                </div>`
            };
            for(let i=0; i<count; i++)
                if(i==0) $(container).append(templateFirst(feeds[min+i]))
                else $(container).append(template(feeds[min+i]))
    }
</script>
@endsection
